<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>My Orders - Gokhale Bandhu</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="/static/css/orders.css">
</head>
<body>

  <!-- Mobile Header -->
  <div class="mobile-header">
    <button class="back-btn" onclick="goBack()" aria-label="Go back">
      <i class="fas fa-arrow-left"></i>
    </button>
    <div class="header-content">
      <h1 class="header-title">My Orders</h1>
    </div>
    <div class="header-actions">
      <button class="search-btn" onclick="toggleSearch()" aria-label="Search orders">
        <i class="fas fa-search"></i>
      </button>
      <button class="filter-btn" onclick="toggleFilter()" aria-label="Filter orders">
        <i class="fas fa-filter"></i>
      </button>
    </div>
  </div>

  <!-- Search Bar -->
  <div class="search-bar" id="searchBar">
    <div class="search-wrapper">
      <i class="fas fa-search"></i>
      <input type="text" id="searchInput" placeholder="Search by order ID or item name..." oninput="handleSearch()">
      <button class="clear-search" onclick="clearSearch()" style="display: none;">
        <i class="fas fa-times"></i>
      </button>
    </div>
  </div>

  <!-- Filter Pills -->
  <div class="filter-pills">
    <button class="pill active" data-filter="all" onclick="filterOrders('all')">
      <i class="fas fa-list"></i>
      <span>All</span>
    </button>
    <button class="pill" data-filter="current" onclick="filterOrders('current')">
      <i class="fas fa-clock"></i>
      <span>Active</span>
    </button>
    <button class="pill" data-filter="delivered" onclick="filterOrders('delivered')">
      <i class="fas fa-check-circle"></i>
      <span>Delivered</span>
    </button>
    <button class="pill" data-filter="cancelled" onclick="filterOrders('cancelled')">
      <i class="fas fa-times-circle"></i>
      <span>Cancelled</span>
    </button>
  </div>

  <!-- Main Content -->
  <div class="main-content">
    <!-- Empty State -->
    <div class="empty-state" id="emptyState" style="display: none;">
      <div class="empty-animation">
        <i class="fas fa-shopping-bag"></i>
      </div>
      <h2 class="empty-title">No orders yet</h2>
      <p class="empty-subtitle">Start shopping to see your orders here</p>
      <a href="/products" class="shop-btn">
        <i class="fas fa-shopping-cart"></i>
        <span>Browse Products</span>
      </a>
    </div>

    <!-- Orders Container -->
    <div class="orders-container" id="ordersContainer">
      <!-- Orders will be rendered here -->
    </div>
  </div>

  <!-- Order Details Modal -->
  <div class="modal" id="orderModal">
    <div class="modal-overlay"></div>
    <div class="modal-container">
      <div class="modal-header">
        <h3>Order Details</h3>
        <button class="modal-close" onclick="closeOrderModal()" aria-label="Close modal">
          <i class="fas fa-times"></i>
        </button>
      </div>
      <div class="modal-body" id="orderModalBody">
        <!-- Order details will be rendered here -->
      </div>
    </div>
  </div>

  <!-- Cancel Order Modal -->
  <div class="modal" id="cancelModal">
    <div class="modal-overlay"></div>
    <div class="modal-container cancel-modal-container">
      <div class="modal-header">
        <h3>Cancel Order</h3>
        <button class="modal-close" onclick="closeCancelModal()" aria-label="Close modal">
          <i class="fas fa-times"></i>
        </button>
      </div>
      <div class="modal-body">
        <div class="cancel-warning">
          <i class="fas fa-exclamation-triangle"></i>
          <p>Are you sure you want to cancel this order? This action cannot be undone.</p>
        </div>

        <div class="form-group">
          <label for="cancelReason">Reason for cancellation *</label>
          <select id="cancelReason">
            <option value="">Select a reason</option>
            <option value="changed_mind">Changed my mind</option>
            <option value="ordered_by_mistake">Ordered by mistake</option>
            <option value="found_better_price">Found better price elsewhere</option>
            <option value="delivery_time_too_long">Delivery time is too long</option>
            <option value="other">Other</option>
          </select>
        </div>

        <div class="cancel-actions">
          <button class="cancel-btn-secondary" onclick="closeCancelModal()">
            <i class="fas fa-arrow-left"></i>
            <span>Go Back</span>
          </button>
          <button class="cancel-btn-primary" onclick="confirmCancelOrder()">
            <i class="fas fa-times-circle"></i>
            <span>Cancel Order</span>
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Toast Container -->
  <div class="toast-container" id="toastContainer"></div>

  <!-- jsPDF for PDF generation -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="/static/js/orders.js"></script>
</body>
</html>