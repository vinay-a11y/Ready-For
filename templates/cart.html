<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Shopping Cart - Gokhale Bandhu</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="/static/css/cart.css">
</head>
<body>

  <!-- Mobile Header -->
  <div class="mobile-header">
    <button class="back-btn" onclick="goBack()" aria-label="Go back">
      <i class="fas fa-arrow-left"></i>
    </button>
    <div class="header-content">
      <h1 class="header-title">Shopping Cart</h1>
      <div class="cart-count" id="mobileCartCount">0</div>
    </div>
    <button class="menu-btn" onclick="toggleMenu()" aria-label="Menu">
      <i class="fas fa-ellipsis-v"></i>
    </button>
  </div>

  <!-- Main Content -->
  <div class="main-content">
    <div>
      <!-- Empty Cart State -->
      <div class="empty-cart-state" id="emptyCartState" style="display: none;">
        <div class="empty-cart-animation">
          <div class="empty-cart-icon">
            <i class="fas fa-shopping-cart"></i>
          </div>
          <div class="floating-items">
            <div class="float-item">üç™</div>
            <div class="float-item">üç´</div>
            <div class="float-item">ü•§</div>
          </div>
        </div>
        <h2 class="empty-title">Your cart is empty</h2>
        <p class="empty-subtitle">Add items to get started</p>
        <a href="/products" class="shop-now-btn">
          <i class="fas fa-shopping-bag"></i>
          <span>Start Shopping</span>
        </a>
      </div>

      <!-- Cart Section -->
      <div class="cart-section" id="cartSection">
        <div class="section-header">
          <div class="header-info">
            <i class="fas fa-shopping-cart"></i>
            <div>
              <h2>Cart Items</h2>
              <span class="item-count" id="itemCount">0 items</span>
            </div>
          </div>
        </div>
        <div class="cart-items" id="cartItemsList">
          <!-- Cart items will be rendered here -->
        </div>
      </div>

      <!-- Delivery Section -->
      <div class="cart-section" id="deliverySection">
        <!-- Address Section -->
        <div class="section-header collapsible" onclick="toggleSection('address')">
          <div class="header-info">
            <i class="fas fa-map-marker-alt"></i>
            <div>
              <h2>Delivery Address</h2>
              <span class="address-status" id="addressStatus">Select address</span>
            </div>
          </div>
          <div class="toggle-icon rotated" id="addressToggle">
            <i class="fas fa-chevron-down"></i>
          </div>
        </div>
        <div class="section-content" id="addressContent">
          <div class="address-card" id="selectedAddressCard">
            <!-- Address will be rendered here -->
          </div>
        </div>

        <!-- Delivery Date Section -->
        <div class="section-header collapsible" onclick="toggleSection('date')">
          <div class="header-info">
            <i class="fas fa-calendar"></i>
            <div>
              <h2>Delivery Date</h2>
              <span class="date-status" id="dateStatus">Optional</span>
            </div>
          </div>
          <div class="toggle-icon" id="dateToggle">
            <i class="fas fa-chevron-down"></i>
          </div>
        </div>
        <div class="section-content collapsed" id="dateContent">
          <div class="date-picker-wrapper">
            <input type="date" id="deliveryDate" class="date-input" onchange="updateDeliveryDate()">
            <div class="date-hint">
              <i class="fas fa-info-circle"></i>
              <span>Choose a date 2-20 days from today</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Desktop Checkout Sidebar -->
    <div class="checkout-sidebar">
      <div class="sidebar-sticky">
        <h3 class="sidebar-title">Order Summary</h3>
        
        <div class="pricing-breakdown">
          <div class="price-row">
            <span>Subtotal</span>
            <span id="sidebarSubtotal">‚Çπ0.00</span>
          </div>
          <div class="price-row discount">
            <span>Discount (17%)</span>
            <span id="sidebarDiscount">-‚Çπ0.00</span>
          </div>
          <div class="price-row">
            <span>Delivery Fee</span>
            <span id="sidebarShipping">‚Çπ90.00</span>
          </div>
          <div class="divider"></div>
          <div class="price-row total">
            <span>Total Amount</span>
            <span id="sidebarTotal">‚Çπ0.00</span>
          </div>
        </div>

        <div class="savings-badge">
          <i class="fas fa-tag"></i>
          <span id="sidebarSavingsText">Save ‚Çπ0.00 on this order</span>
        </div>

        <button class="checkout-btn-desktop" onclick="proceedToCheckout()">
          <i class="fas fa-lock"></i>
          <span>Proceed to Checkout</span>
        </button>
      </div>
    </div>
  </div>

  <!-- Bottom Checkout Bar (Mobile) -->
  <div class="bottom-checkout-bar" id="bottomCheckoutBar">
    <div class="checkout-summary" onclick="toggleCheckoutDetails()">
      <div class="summary-left">
        <span class="summary-label">Total</span>
        <span class="summary-amount" id="bottomTotal">‚Çπ0.00</span>
      </div>
      <button class="checkout-btn" onclick="proceedToCheckout(); event.stopPropagation();">
        <span>Checkout</span>
        <i class="fas fa-arrow-right"></i>
      </button>
    </div>

    <div class="checkout-details" id="checkoutDetails">
      <div class="detail-header">
        <h3>Order Summary</h3>
        <button class="close-details" onclick="toggleCheckoutDetails()">
          <i class="fas fa-times"></i>
        </button>
      </div>
      <div class="pricing-breakdown">
        <div class="price-row">
          <span>Subtotal</span>
          <span id="detailSubtotal">‚Çπ0.00</span>
        </div>
        <div class="price-row discount">
          <span>Discount (17%)</span>
          <span id="detailDiscount">-‚Çπ0.00</span>
        </div>
        <div class="price-row">
          <span>Delivery Fee</span>
          <span id="detailShipping">‚Çπ90.00</span>
        </div>
        <div class="price-row total">
          <span>Total Amount</span>
          <span id="detailTotal">‚Çπ0.00</span>
        </div>
      </div>
      <div class="savings-badge">
        <i class="fas fa-tag"></i>
        <span id="savingsText">Save ‚Çπ0.00 (17% OFF)</span>
      </div>
    </div>
  </div>

  <!-- Address Modal -->
  <div class="modal" id="addressModal">
    <div class="modal-overlay" onclick="closeAddressModal()"></div>
    <div class="modal-container">
      <div class="modal-header">
        <h3>Manage Addresses</h3>
        <button class="modal-close" onclick="closeAddressModal()" aria-label="Close modal">
          <i class="fas fa-times"></i>
        </button>
      </div>
      <div class="modal-body" id="addressModalBody">
        <!-- Address form will be rendered here -->
      </div>
    </div>
  </div>

  <!-- Toast Container -->
  <div class="toast-container" id="toastContainer"></div>

  <!-- Razorpay Script -->
  <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
  <script src="/static/js/cart.js"></script>
</body>
</html>